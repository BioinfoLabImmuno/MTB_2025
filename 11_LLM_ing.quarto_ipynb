{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "---\n",
        "title: \"Corso in 4 Moduli — ChatGPT per individuare mutazioni ESCAT livello I\"\n",
        "author: \"\"\n",
        "date: \"2025-09-11\"\n",
        "lang: it\n",
        "format:\n",
        "  html:\n",
        "    toc: true\n",
        "    toc-depth: 3\n",
        "    theme: cosmo\n",
        "    number-sections: true\n",
        "  pdf:\n",
        "    toc: true\n",
        "    number-sections: true\n",
        "editor: visual\n",
        "---\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "# 🧬 Report Clinico ESCAT\n",
        "\n",
        "Analisi di mutazioni da referto NGS secondo la scala **ESCAT**, usando modelli Ollama (Llama3, DeepSeek, Meditron).\n",
        "\n",
        "------------------------------------------------------------------------\n",
        "\n",
        "## 📋 Mutazioni rilevate\n",
        "\n",
        "\\`\\`\\`{r} \\# Lettura VCF ed estrazione mutazioni vcf \\<- readLines(\"patient123.vcf\") vcf \\<- vcf\\[!grepl(\"\\^#\", vcf)\\]\n",
        "\n",
        "mutations \\<- sapply(vcf, function(line) { info \\<- strsplit(line, \"\\t\")\\[\\[1\\]\\]\\[8\\] gene \\<- sub(\"GENE=\", \"\", strsplit(info, \";\")\\[\\[1\\]\\]\\[1\\]) mut \\<- sub(\"MUT=\", \"\", strsplit(info, \";\")\\[\\[1\\]\\]\\[2\\]) paste(gene, mut) })\n",
        "\n",
        "# Salva mutazioni in file temporaneo per Ollama\n",
        "\n",
        "writeLines(mutations, \"mutations.txt\")\n",
        "\n",
        "# Mostra a schermo\n",
        "\n",
        "mutations\n",
        "\n",
        "# Report Clinico ESCAT\n",
        "\n",
        "Questo documento mostra come classificare mutazioni da un referto NGS secondo la scala **ESCAT** usando Ollama con diversi modelli (Llama3, DeepSeek, Meditron).\n",
        "\n",
        "------------------------------------------------------------------------\n",
        "\n",
        "## 🧪 Classificazione ESCAT (Ollama + Llama3)\n",
        "\n",
        "\n",
        "```{bash}\n",
        "ollama run llama3 \"\n",
        "Classifica le seguenti mutazioni secondo ESCAT.\n",
        "Output in tabella (Gene/Mutazione, Tumore, ESCAT Tier, Evidenze, Note cliniche).\n",
        "$(cat mutations.txt)\n",
        "\"\n",
        "```\n",
        "\n",
        "\n",
        "## 🔍 Trial clinici (DeepSeek)\n",
        "\n",
        "\n",
        "```{bash}\n",
        "ollama run deepseek \"\n",
        "Per ciascuna mutazione elenca 3 trial clinici (2019–2025) con ID, farmaco, fase e outcome primario.\n",
        "$(cat mutations.txt)\n",
        "\"\n",
        "```\n",
        "\n",
        "\n",
        "##  Linee guida e citazioni (Meditron)\n",
        "\n",
        "\n",
        "```{bash}\n",
        "ollama run meditron \"\n",
        "Trova linee guida e citazioni ESCAT/ESMO/ASCO/NCCN per le seguenti mutazioni.\n",
        "$(cat mutations.txt)\n",
        "Output: citazioni numerate con anno, fonte e link.\n",
        "\"\n",
        "```\n",
        "\n",
        "\n",
        "##  File di input: `patient123.vcf`\n",
        "\n",
        "Crea questo file accanto al `.qmd`:\n",
        "\n",
        "``` vcf\n",
        "##fileformat=VCFv4.2\n",
        "##source=PanelNGS\n",
        "#CHROM  POS     ID  REF ALT QUAL    FILTER  INFO\n",
        "7       55249071    .   G   A   .   PASS    GENE=EGFR;MUT=L858R\n",
        "2       29443655    .   G   T   .   PASS    GENE=ALK;MUT=FUSION\n",
        "12      25398285    .   G   A   .   PASS    GENE=KRAS;MUT=G12D\n",
        "17      43071077    .   C   T   .   PASS    GENE=BRCA1;MUT=LOF\n",
        "```\n",
        "\n",
        "## 🚀 Come usarlo\n",
        "\n",
        "1.  Installa i modelli Ollama:\n",
        "\n",
        "    ``` bash\n",
        "    ollama pull llama3\n",
        "    ollama pull deepseek\n",
        "    ollama pull meditron\n",
        "    ```"
      ],
      "id": "3a4c2bba"
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python 3",
      "language": "python",
      "name": "python3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}